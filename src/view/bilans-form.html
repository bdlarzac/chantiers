
<h1>Choix bilan</h1>

{{with .Details}}

<form class="form margin-left2" action="{{.UrlAction}}" onsubmit="return validateForm();" method="post">
    
    <div class="grid2-form">
        
        <label for="periods">Période</label>
        <select id="periods" name="periods" onChange="periodChanged();">
            <option value="CHOOSE_PERIOD">--- Choisir période ---</option>
            {{range $val := .Periods}}
                <option value="">{{(index $val 0) | dateFr}} - {{(index $val 1) | dateFr}}</option>
            {{end}}
        </select>
        
        <label>Dates libres</label>
        <div>
            <div class="inline-block">
                <div class="center"><label for="date-debut">Début</label></div>
                <input type="date" name="date-debut" id="date-debut" value="">
            </div>
            <div class="inline-block">
                <div class="center"><label for="date-fin">Fin</label></div>
                <input type="date" name="date-fin" id="date-fin" value="">
            </div>
        </div>
        
    </div>
    
    <div class="margin-top">
        <div class="float-left">
            <a href="#help" id="toogle-help" class="help-button" title="Afficher l'aide de ce formulaire" onClick="toogle('help');">?</a>
        </div>
        <div class="float-right">
            <input type="button" name="cancel" value="Annuler" onClick="window.history.back();">
            <input type="submit" class="margin-left" value="Valider">
        </div>
    </div>

</form>

<a name="help"></a>
<div id="help" class="margin display-none">
    <div class="help-content">
        <div class="help-title">Aide</div>
        <div class="section">
            <b>Choix de la date</b> : Vous pouvez soit choisir une période, soit choisir un intervalle libre de dates.
        </div>
    </div>
</div>


<script>

function periodChanged(){
    
}

// ***************************************
function validateForm(){
    let msg = "";
    //
    const deb = document.getElementsByName("date-debut")[0].value;
    const fin = document.getElementsByName("date-fin")[0].value;
    if(deb == ""){
        msg += "- Vous devez renseigner la date de début.\n";
    }
    if(fin == ""){
        msg += "- Vous devez renseigner la date de fin.\n";
    }
    if(deb != "" && fin != "" && fin < deb){
        msg += "- La date de fin doit se situer après la date de début.\n";
    }
    //
    return true;
}

</script>

{{end}}
